import{d as t,o as e,c as a,w as n,a as i,n as o,k as s,i as l,b as u,F as r,r as d,p as c,g as m,t as p,l as _,h as f}from"./index-aa2b8fb8.js";import{_ as h}from"./u-overlay.4ad4b95b.js";import{r as y}from"./uni-app.es.392722c2.js";import{m as w,a as g}from"./mixin.d0c91ebc.js";import{_ as k}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as S}from"./u-icon.9dfb5cac.js";import"./u-transition.a99c15fb.js";const b=k({name:"u-drawdown-item",mixins:[w,g,{props:{value:{type:[Number,String,Array],default:""},title:{type:[String,Number],default:""},options:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},height:{type:[Number,String],default:"auto"},closeOnClickOverlay:{type:Boolean,default:!0}}}],data:()=>({show:!1,top:"126px",animationData:{}}),mounted(){this.init()},watch:{dataChange(t,e){this.updateParentData()}},computed:{dataChange(){return[this.title,this.disabled]},style(){const t={zIndex:10071,position:"fixed",display:"flex",left:0,right:0};return t.top=uni.$u.addUnit(this.top),t}},methods:{init(){this.updateParentData()},updateParentData(){this.getParentData("u-dropdown"),this.parent||uni.$u.error("u-dropdown-item必须配合u-dropdown使用");const t=this.parent.menuList.findIndex((t=>t.title===this.title)),e={title:this.title,disabled:this.disabled};t>=0?this.parent.menuList[t]=e:this.parent.menuList.push(e)},async setContentAnimate(t){this.animating=!0;const e=uni.createAnimation({timingFunction:"ease-in-out"});e.height(t).step({duration:this.duration}).step(),this.animationData=e.export(),uni.$u.sleep(this.duration).then((()=>{this.animating=!1}))},overlayClick(){this.show=!1,this.setContentAnimate(0)}}},[["render",function(u,r,d,c,m,p){const _=y(t("u-overlay"),h),f=l;return e(),a(f,{class:"u-drawdown-item"},{default:n((()=>[i(_,{customStyle:"top: 126px",show:m.show,closeOnClickOverlay:u.closeOnClickOverlay,onClick:p.overlayClick},null,8,["show","closeOnClickOverlay","onClick"]),i(f,{class:"u-drawdown-item__content",style:o([p.style]),animation:m.animationData,ref:"animation"},{default:n((()=>[s(u.$slots,"default",{},void 0,!0)])),_:3},8,["style","animation"])])),_:3})}],["__scopeId","data-v-922d02a8"]]);const v=k({name:"u-dropdown",mixins:[g,{props:{activeStyle:{type:[String,Object],default:()=>({color:"#2979ff",fontSize:"14px"})},inactiveStyle:{type:[String,Object],default:()=>({color:"#606266",fontSize:"14px"})},closeOnClickMask:{type:Boolean,default:!0},closeOnClickSelf:{type:Boolean,default:!0},duration:{type:[Number,String],default:300},height:{type:[Number,String],default:40},borderBottom:{type:Boolean,default:!1},titleSize:{type:[Number,String],default:14},borderRadius:{type:[Number,String],default:0},menuIcon:{type:String,default:"arrow-down"},menuIconSize:{type:[Number,String],default:14}}}],data:()=>({menuList:[],current:0}),computed:{},created(){this.children=[]},emits:["click"],methods:{clickHandler(t,e){this.children.map((e=>{e.title===t.title?(e.$emit("click"),e.setContentAnimate(e.show?0:300),e.show=!e.show):(e.show=!1,e.setContentAnimate(0))}))},queryRect(t){return new Promise((e=>{this.$uGetRect(`.${t}`).then((t=>{e(t)}))}))}}},[["render",function(h,w,g,k,b,v){const C=f,x=y(t("u-icon"),S),O=l;return e(),a(O,{class:"u-drawdown"},{default:n((()=>[i(O,{class:"u-dropdown__menu",style:o({height:h.$u.addUnit(h.height)}),ref:"u-dropdown__menu"},{default:n((()=>[(e(!0),u(r,null,d(b.menuList,((t,s)=>(e(),a(O,{class:"u-dropdown__menu__item",key:s,onClick:c((e=>v.clickHandler(t,s)),["stop"])},{default:n((()=>[i(O,{class:"u-dropdown__menu__item__content"},{default:n((()=>[i(C,{class:"u-dropdown__menu__item__content__text",style:o([s===b.current?h.activeStyle:h.inactiveStyle])},{default:n((()=>[m(p(t.title),1)])),_:2},1032,["style"]),i(O,{class:_(["u-dropdown__menu__item__content__arrow",[s===b.current&&"u-dropdown__menu__item__content__arrow--rotate"]])},{default:n((()=>[i(x,{name:h.menuIcon,size:h.$u.addUnit(h.menuIconSize)},null,8,["name","size"])])),_:2},1032,["class"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["style"]),i(O,{class:"u-dropdown__content"},{default:n((()=>[s(h.$slots,"default",{},void 0,!0)])),_:3})])),_:3})}],["__scopeId","data-v-a51c07fa"]]);const C=k({},[["render",function(o,s){const u=f,r=l,d=y(t("u-dropdown-item"),b),c=y(t("u-dropdown"),v);return e(),a(r,{class:"u-page"},{default:n((()=>[i(r,{class:"u-demo-block"},{default:n((()=>[i(u,{class:"u-demo-block__title"},{default:n((()=>[m("基础功能")])),_:1}),i(r,{class:"u-demo-block__content"},{default:n((()=>[i(c,null,{default:n((()=>[i(d,{title:"标题1"},{default:n((()=>[i(r,{class:"",style:{height:"300px"}},{default:n((()=>[m(" 123 ")])),_:1})])),_:1}),i(d,{title:"标题2"},{default:n((()=>[m(" 456 ")])),_:1}),i(d,{title:"标题3"},{default:n((()=>[m(" 789 ")])),_:1}),i(d,{title:"标题4"},{default:n((()=>[m(" abc ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}]]);export{C as default};
