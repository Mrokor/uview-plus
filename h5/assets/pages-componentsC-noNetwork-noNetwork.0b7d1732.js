import{_ as t}from"./u-icon.e9ca9d71.js";import{d as e,o as n,c as o,w as s,a as i,g as r,t as a,f as p,p as c,h as d,i as l}from"./index-4f0c5e1d.js";import{r as u}from"./uni-app.es.fcad82c0.js";import{_ as m}from"./u-button.d1698bc7.js";import{_ as y}from"./u-overlay.f6da8b85.js";import{m as g,a as h}from"./mixin.d0c91ebc.js";import{_ as f}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.b1b77ee0.js";import"./u-transition.589ae8d1.js";const S=f({name:"u-no-network",mixins:[g,h,{props:{tips:{type:String,default:()=>uni.$u.props.noNetwork.tips},zIndex:{type:[String,Number],default:()=>uni.$u.props.noNetwork.zIndex},image:{type:String,default:()=>uni.$u.props.noNetwork.image}}}],data:()=>({isConnected:!0,networkType:"none"}),mounted(){this.isIOS="ios"===uni.getSystemInfoSync().platform,uni.onNetworkStatusChange((t=>{this.isConnected=t.isConnected,this.networkType=t.networkType,this.emitEvent(this.networkType)})),uni.getNetworkType({success:t=>{this.networkType=t.networkType,this.emitEvent(this.networkType),"none"==t.networkType?this.isConnected=!1:this.isConnected=!0}})},emits:["disconnected","connected"],methods:{retry(){uni.getNetworkType({success:t=>{this.networkType=t.networkType,this.emitEvent(this.networkType),"none"==t.networkType?(uni.$u.toast("无网络连接"),this.isConnected=!1):(uni.$u.toast("网络已连接"),this.isConnected=!0)}}),this.$emit("retry")},emitEvent(t){this.$emit("none"===t?"disconnected":"connected")},async openSettings(){"none"!=this.networkType||this.openSystemSettings()},openAppSettings(){this.gotoAppSetting()},openSystemSettings(){this.isIOS?this.gotoiOSSetting():this.gotoAndroidSetting()},network(){var t=null,e=plus.ios.newObject("CTCellularData"),n=e.plusGetAttribute("restrictedState");return 0==n?t=null:2==n?t=1:1==n&&(t=2),plus.ios.deleteObject(e),t},gotoAppSetting(){if(this.isIOS){var t=plus.ios.import("UIApplication").sharedApplication(),e=plus.ios.import("NSURL"),n=e.URLWithString("app-settings:");t.openURL(n),plus.ios.deleteObject(n),plus.ios.deleteObject(e),plus.ios.deleteObject(t)}else{var o=plus.android.importClass("android.content.Intent"),s=plus.android.importClass("android.provider.Settings"),i=plus.android.importClass("android.net.Uri"),r=plus.android.runtimeMainActivity(),a=new o;a.setAction(s.ACTION_APPLICATION_DETAILS_SETTINGS);var p=i.fromParts("package",r.getPackageName(),null);a.setData(p),r.startActivity(a)}},gotoiOSSetting(){var t=plus.ios.import("UIApplication").sharedApplication(),e=plus.ios.import("NSURL"),n=e.URLWithString("App-prefs:root=General");t.openURL(n),plus.ios.deleteObject(n),plus.ios.deleteObject(e),plus.ios.deleteObject(t)},gotoAndroidSetting(){var t=plus.android.importClass("android.content.Intent"),e=plus.android.importClass("android.provider.Settings"),n=plus.android.runtimeMainActivity(),o=new t(e.ACTION_SETTINGS);n.startActivity(o)}}},[["render",function(g,h,f,S,_,k){const w=u(e("u-icon"),t),T=d,v=u(e("u-button"),m),C=l,A=u(e("u-overlay"),y);return n(),o(A,{show:!_.isConnected,zIndex:g.zIndex,onTouchmove:c(g.noop,["stop","prevent"]),customStyle:{backgroundColor:"#fff",display:"flex",justifyContent:"center"}},{default:s((()=>[i(C,{class:"u-no-network"},{default:s((()=>[i(w,{name:g.image,size:"150",imgMode:"widthFit",class:"u-no-network__error-icon"},null,8,["name"]),i(T,{class:"u-no-network__tips"},{default:s((()=>[r(a(g.tips),1)])),_:1}),p(" 只有APP平台，才能跳转设置页，因为需要调用plus环境 "),i(C,{class:"u-no-network__retry"},{default:s((()=>[i(v,{size:"mini",text:"重试",type:"primary",plain:"",onClick:k.retry},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["show","zIndex","onTouchmove"])}],["__scopeId","data-v-7d6ecce1"]]);const _=f({methods:{disconnected(){console.log("disconnected")},connected(){console.log("connected")},retry(){console.log("retry")}}},[["render",function(a,p,c,m,y,g){const h=u(e("u-no-network"),S),f=u(e("u-icon"),t),_=l,k=d;return n(),o(_,{class:"u-page"},{default:s((()=>[i(h,{onDisconnected:g.disconnected,onConnected:g.connected,onRetry:g.retry},null,8,["onDisconnected","onConnected","onRetry"]),i(_,{class:"u-content"},{default:s((()=>[i(_,{class:"u-content__circle"},{default:s((()=>[i(f,{name:"checkbox-mark",color:"#fff",size:"30"})])),_:1}),i(k,{class:"u-content__normal"},{default:s((()=>[r("网络正常")])),_:1}),i(k,{class:"u-content__tips"},{default:s((()=>[r("请您断开设备的WiFi和数据连接(或开启飞行模式)，即可看到效果")])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-dcb4e9ab"]]);export{_ as default};
