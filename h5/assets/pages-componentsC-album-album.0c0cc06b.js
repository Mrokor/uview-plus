import{d as t,o as e,c as u,w as l,b as s,F as i,r as a,n as o,a as m,f as n,e as r,i as c,g as d,h as p}from"./index-aa2b8fb8.js";import{_ as h}from"./u--text.f55461ae.js";import{r as g}from"./uni-app.es.392722c2.js";import{m as _,a as w}from"./mixin.d0c91ebc.js";import{_ as b}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as f}from"./logo.e6a56f74.js";import"./u-icon.9dfb5cac.js";import"./u-link.1670b144.js";const v=b({name:"u-album",mixins:[_,w,{props:{urls:{type:Array,default:()=>uni.$u.props.album.urls},keyName:{type:String,default:()=>uni.$u.props.album.keyName},singleSize:{type:[String,Number],default:()=>uni.$u.props.album.singleSize},multipleSize:{type:[String,Number],default:()=>uni.$u.props.album.multipleSize},space:{type:[String,Number],default:()=>uni.$u.props.album.space},singleMode:{type:String,default:()=>uni.$u.props.album.singleMode},multipleMode:{type:String,default:()=>uni.$u.props.album.multipleMode},maxCount:{type:[String,Number],default:()=>uni.$u.props.album.maxCount},previewFullImage:{type:Boolean,default:()=>uni.$u.props.album.previewFullImage},rowCount:{type:[String,Number],default:()=>uni.$u.props.album.rowCount},showMore:{type:Boolean,default:()=>uni.$u.props.album.showMore}}}],data:()=>({singleWidth:0,singleHeight:0,singlePercent:.6}),watch:{urls:{immediate:!0,handler(t){1===t.length&&this.getImageRect()}}},emits:["albumWidth"],computed:{imageStyle(){return(t,e)=>{const{space:u,rowCount:l,multipleSize:s,urls:i}=this,{addUnit:a,addStyle:o}=uni.$u,m=this.showUrls.length;this.urls.length;const n={marginRight:a(u),marginBottom:a(u)};return t===m&&(n.marginBottom=0),(e===l||t===m&&e===this.showUrls[t-1].length)&&(n.marginRight=0),n}},showUrls(){const t=[];return this.urls.map(((e,u)=>{if(u+1<=this.maxCount){const l=Math.floor(u/this.rowCount);t[l]||(t[l]=[]),t[l].push(e)}})),t},imageWidth(){return uni.$u.addUnit(1===this.urls.length?this.singleWidth:this.multipleSize)},imageHeight(){return uni.$u.addUnit(1===this.urls.length?this.singleHeight:this.multipleSize)},albumWidth(){let t=0;return t=1===this.urls.length?this.singleWidth:this.showUrls[0].length*this.multipleSize+this.space*(this.showUrls[0].length-1),this.$emit("albumWidth",t),t}},methods:{onPreviewTap(t){const e=this.urls.map((t=>this.getSrc(t)));uni.previewImage({current:t,urls:e})},getSrc(t){return uni.$u.test.object(t)?this.keyName&&t[this.keyName]||t.src:t},getImageRect(){const t=this.getSrc(this.urls[0]);uni.getImageInfo({src:t,success:t=>{const e=t.width>=t.height;this.singleWidth=e?this.singleSize:t.width/t.height*this.singleSize,this.singleHeight=e?t.height/t.width*this.singleWidth:this.singleSize},fail:()=>{this.getComponentWidth()}})},async getComponentWidth(){await uni.$u.sleep(30),this.$uGetRect(".u-album__row").then((t=>{this.singleWidth=t.width*this.singlePercent}))}}},[["render",function(d,p,_,w,b,f){const v=r,y=g(t("u--text"),h),x=c;return e(),u(x,{class:"u-album"},{default:l((()=>[(e(!0),s(i,null,a(f.showUrls,((t,r)=>(e(),u(x,{class:"u-album__row",ref_for:!0,ref:"u-album__row",forComputedUse:f.albumWidth,key:r},{default:l((()=>[(e(!0),s(i,null,a(t,((t,s)=>(e(),u(x,{class:"u-album__row__wrapper",key:s,style:o([f.imageStyle(r+1,s+1)]),onClick:e=>d.previewFullImage?f.onPreviewTap(f.getSrc(t)):""},{default:l((()=>[m(v,{src:f.getSrc(t),mode:1===d.urls.length?f.imageHeight>0?d.singleMode:"widthFix":d.multipleMode,style:o([{width:f.imageWidth,height:f.imageHeight}])},null,8,["src","mode","style"]),d.showMore&&d.urls.length>d.rowCount*f.showUrls.length&&r===f.showUrls.length-1&&s===f.showUrls[f.showUrls.length-1].length-1?(e(),u(x,{key:0,class:"u-album__row__wrapper__text"},{default:l((()=>[m(y,{text:"+"+(d.urls.length-d.maxCount),color:"#fff",size:.3*d.multipleSize,align:"center",customStyle:"justify-content: center"},null,8,["text","size"])])),_:1})):n("v-if",!0)])),_:2},1032,["style","onClick"])))),128))])),_:2},1032,["forComputedUse"])))),128))])),_:1})}],["__scopeId","data-v-73f4fe27"]]);const y=b({data:()=>({albumWidth:0,urls1:[{src2:"https://cdn.uviewui.com/uview/album/1.jpg"}],urls2:["https://cdn.uviewui.com/uview/album/1.jpg","https://cdn.uviewui.com/uview/album/2.jpg","https://cdn.uviewui.com/uview/album/3.jpg","https://cdn.uviewui.com/uview/album/4.jpg","https://cdn.uviewui.com/uview/album/5.jpg","https://cdn.uviewui.com/uview/album/6.jpg","https://cdn.uviewui.com/uview/album/7.jpg","https://cdn.uviewui.com/uview/album/8.jpg","https://cdn.uviewui.com/uview/album/9.jpg","https://cdn.uviewui.com/uview/album/10.jpg"],urls3:["https://cdn.uviewui.com/uview/album/5.jpg","https://cdn.uviewui.com/uview/album/6.jpg","https://cdn.uviewui.com/uview/album/7.jpg","https://cdn.uviewui.com/uview/album/8.jpg"],urls4:["https://cdn.uviewui.com/uview/album/7.jpg","https://cdn.uviewui.com/uview/album/8.jpg","https://cdn.uviewui.com/uview/album/9.jpg","https://cdn.uviewui.com/uview/album/10.jpg"]})},[["render",function(s,i,a,n,_,w){const b=p,y=r,x=c,S=g(t("u--text"),h),j=g(t("u-album"),v);return e(),u(x,{class:"u-page"},{default:l((()=>[m(x,{class:"u-demo-block"},{default:l((()=>[m(b,{class:"u-demo-block__title"},{default:l((()=>[d("基础使用")])),_:1}),m(x,{class:"u-demo-block__content"},{default:l((()=>[m(x,{class:"album"},{default:l((()=>[m(x,{class:"album__avatar"},{default:l((()=>[m(y,{src:f,mode:"",style:{width:"32px",height:"32px"}})])),_:1}),m(x,{class:"album__content"},{default:l((()=>[m(S,{text:"uView UI",type:"primary",bold:"",size:"17"}),m(S,{margin:"0 0 8px 0",text:"全面的组件和便捷的工具会让您信手拈来，如鱼得水"}),m(j,{urls:_.urls1,keyName:"src2"},null,8,["urls"])])),_:1})])),_:1})])),_:1})])),_:1}),m(x,{class:"u-demo-block"},{default:l((()=>[m(b,{class:"u-demo-block__title"},{default:l((()=>[d("多图模式")])),_:1}),m(x,{class:"u-demo-block__content"},{default:l((()=>[m(x,{class:"album"},{default:l((()=>[m(x,{class:"album__avatar"},{default:l((()=>[m(y,{src:f,mode:"",style:{width:"32px",height:"32px"}})])),_:1}),m(x,{class:"album__content"},{default:l((()=>[m(S,{text:"uView UI",type:"primary",bold:"",size:"17"}),m(S,{margin:"0 0 8px 0",text:"全面的组件和便捷的工具会让您信手拈来，如鱼得水"}),m(j,{urls:_.urls2},null,8,["urls"])])),_:1})])),_:1})])),_:1})])),_:1}),m(x,{class:"u-demo-block"},{default:l((()=>[m(b,{class:"u-demo-block__title"},{default:l((()=>[d("图文对齐")])),_:1}),m(x,{class:"u-demo-block__content"},{default:l((()=>[m(x,{class:"album"},{default:l((()=>[m(x,{class:"album__avatar"},{default:l((()=>[m(y,{src:f,mode:"",style:{width:"32px",height:"32px"}})])),_:1}),m(x,{class:"album__content"},{default:l((()=>[m(S,{text:"uView UI",type:"primary",bold:"",size:"17"}),m(x,{style:o({marginBottom:"8px",width:_.albumWidth+"px"})},{default:l((()=>[m(S,{text:"全面的组件和便捷的工具会让您信手拈来，如鱼得水",customStyle:{width:_.albumWidth+"px"}},null,8,["customStyle"])])),_:1},8,["style"]),m(j,{urls:_.urls2,onAlbumWidth:i[0]||(i[0]=t=>_.albumWidth=t),multipleSize:"68"},null,8,["urls"])])),_:1})])),_:1})])),_:1})])),_:1}),m(x,{class:"u-demo-block"},{default:l((()=>[m(b,{class:"u-demo-block__title"},{default:l((()=>[d("更改裁剪模式")])),_:1}),m(x,{class:"u-demo-block__content"},{default:l((()=>[m(x,{class:"album"},{default:l((()=>[m(x,{class:"album__avatar"},{default:l((()=>[m(y,{src:f,mode:"",style:{width:"32px",height:"32px"}})])),_:1}),m(x,{class:"album__content"},{default:l((()=>[m(S,{text:"uView UI",type:"primary",bold:"",size:"17"}),m(S,{margin:"0 0 8px 0",text:"全面的组件和便捷的工具会让您信手拈来，如鱼得水"}),m(j,{urls:_.urls3,rowCount:"2",maxCount:"4",multipleMode:"scaleToFill"},null,8,["urls"])])),_:1})])),_:1})])),_:1})])),_:1}),m(x,{class:"u-demo-block"},{default:l((()=>[m(b,{class:"u-demo-block__title"},{default:l((()=>[d("更改图片大小")])),_:1}),m(x,{class:"u-demo-block__content"},{default:l((()=>[m(x,{class:"album"},{default:l((()=>[m(x,{class:"album__avatar"},{default:l((()=>[m(y,{src:f,mode:"",style:{width:"32px",height:"32px"}})])),_:1}),m(x,{class:"album__content"},{default:l((()=>[m(S,{text:"uView UI",type:"primary",bold:"",size:"17"}),m(S,{margin:"0 0 8px 0",text:"全面的组件和便捷的工具会让您信手拈来，如鱼得水"}),m(j,{urls:_.urls4,rowCount:"2",maxCount:"4",multipleSize:"50"},null,8,["urls"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-97081014"]]);export{y as default};
