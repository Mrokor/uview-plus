import{d as i,o as e,c as o,w as r,a,n as t,f as s,k as d,e as n,i as u}from"./index-aa2b8fb8.js";import{_ as l}from"./u-icon.9dfb5cac.js";import{r as h}from"./uni-app.es.392722c2.js";import{_ as p}from"./u-transition.a99c15fb.js";import{m as g,a as m}from"./mixin.d0c91ebc.js";import{_ as c}from"./_plugin-vue_export-helper.1b428a4d.js";const y={props:{src:{type:String,default:()=>uni.$u.props.image.src},mode:{type:String,default:()=>uni.$u.props.image.mode},width:{type:[String,Number],default:()=>uni.$u.props.image.width},height:{type:[String,Number],default:()=>uni.$u.props.image.height},shape:{type:String,default:()=>uni.$u.props.image.shape},radius:{type:[String,Number],default:()=>uni.$u.props.image.radius},lazyLoad:{type:Boolean,default:()=>uni.$u.props.image.lazyLoad},showMenuByLongpress:{type:Boolean,default:()=>uni.$u.props.image.showMenuByLongpress},loadingIcon:{type:String,default:()=>uni.$u.props.image.loadingIcon},errorIcon:{type:String,default:()=>uni.$u.props.image.errorIcon},showLoading:{type:Boolean,default:()=>uni.$u.props.image.showLoading},showError:{type:Boolean,default:()=>uni.$u.props.image.showError},fade:{type:Boolean,default:()=>uni.$u.props.image.fade},webp:{type:Boolean,default:()=>uni.$u.props.image.webp},duration:{type:[String,Number],default:()=>uni.$u.props.image.duration},bgColor:{type:String,default:()=>uni.$u.props.image.bgColor}}};const w=c({name:"u-image",mixins:[g,m,y],data(){return{isError:!1,loading:!0,opacity:1,durationTime:this.duration,backgroundStyle:{},show:!1}},watch:{src:{immediate:!0,handler(i){i?(this.isError=!1,this.loading=!0):this.isError=!0}}},computed:{wrapStyle(){let i={};return i.width=this.$u.addUnit(this.width),i.height=this.$u.addUnit(this.height),i.borderRadius="circle"==this.shape?"10000px":uni.$u.addUnit(this.radius),i.overflow=this.radius>0?"hidden":"visible",uni.$u.deepMerge(i,uni.$u.addStyle(this.customStyle))}},mounted(){this.show=!0},emits:["click","error","load"],methods:{onClick(){this.$emit("click")},onErrorHandler(i){this.loading=!1,this.isError=!0,this.$emit("error",i)},onLoadHandler(i){this.loading=!1,this.isError=!1,this.$emit("load",i),this.removeBgColor()},removeBgColor(){this.backgroundStyle={backgroundColor:"transparent"}}}},[["render",function(g,m,c,y,w,f){const $=n,b=h(i("u-icon"),l),_=u,S=h(i("u-transition"),p);return e(),o(S,{mode:"fade",show:w.show,duration:g.fade?1e3:0},{default:r((()=>[a(_,{class:"u-image",onClick:f.onClick,style:t([f.wrapStyle,w.backgroundStyle])},{default:r((()=>[w.isError?s("v-if",!0):(e(),o($,{key:0,src:g.src,mode:g.mode,onError:f.onErrorHandler,onLoad:f.onLoadHandler,"show-menu-by-longpress":g.showMenuByLongpress,"lazy-load":g.lazyLoad,class:"u-image__image",style:t({borderRadius:"circle"==g.shape?"10000px":g.$u.addUnit(g.radius),width:g.$u.addUnit(g.width),height:g.$u.addUnit(g.height)})},null,8,["src","mode","onError","onLoad","show-menu-by-longpress","lazy-load","style"])),g.showLoading&&w.loading?(e(),o(_,{key:1,class:"u-image__loading",style:t({borderRadius:"circle"==g.shape?"50%":g.$u.addUnit(g.radius),backgroundColor:this.bgColor,width:g.$u.addUnit(g.width),height:g.$u.addUnit(g.height)})},{default:r((()=>[d(g.$slots,"loading",{},(()=>[a(b,{name:g.loadingIcon,width:g.width,height:g.height},null,8,["name","width","height"])]),!0)])),_:3},8,["style"])):s("v-if",!0),g.showError&&w.isError&&!w.loading?(e(),o(_,{key:2,class:"u-image__error",style:t({borderRadius:"circle"==g.shape?"50%":g.$u.addUnit(g.radius),width:g.$u.addUnit(g.width),height:g.$u.addUnit(g.height)})},{default:r((()=>[d(g.$slots,"error",{},(()=>[a(b,{name:g.errorIcon,width:g.width,height:g.height},null,8,["name","width","height"])]),!0)])),_:3},8,["style"])):s("v-if",!0)])),_:3},8,["onClick","style"])])),_:3},8,["show","duration"])}],["__scopeId","data-v-f2f94a4d"]]);export{w as _,y as p};
