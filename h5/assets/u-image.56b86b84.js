import{m as i,f as e,d as o,o as r,c as a,w as t,a as s,n as d,l as n,h as u,e as l,i as h}from"./index-25e6794f.js";import{_ as p}from"./u-icon.a039310a.js";import{r as g}from"./uni-app.es.5bc0fbe4.js";import{_ as m}from"./u-transition.c6684281.js";import{_ as c}from"./_plugin-vue_export-helper.1b428a4d.js";const y={props:{src:{type:String,default:()=>uni.$u.props.image.src},mode:{type:String,default:()=>uni.$u.props.image.mode},width:{type:[String,Number],default:()=>uni.$u.props.image.width},height:{type:[String,Number],default:()=>uni.$u.props.image.height},shape:{type:String,default:()=>uni.$u.props.image.shape},radius:{type:[String,Number],default:()=>uni.$u.props.image.radius},lazyLoad:{type:Boolean,default:()=>uni.$u.props.image.lazyLoad},showMenuByLongpress:{type:Boolean,default:()=>uni.$u.props.image.showMenuByLongpress},loadingIcon:{type:String,default:()=>uni.$u.props.image.loadingIcon},errorIcon:{type:String,default:()=>uni.$u.props.image.errorIcon},showLoading:{type:Boolean,default:()=>uni.$u.props.image.showLoading},showError:{type:Boolean,default:()=>uni.$u.props.image.showError},fade:{type:Boolean,default:()=>uni.$u.props.image.fade},webp:{type:Boolean,default:()=>uni.$u.props.image.webp},duration:{type:[String,Number],default:()=>uni.$u.props.image.duration},bgColor:{type:String,default:()=>uni.$u.props.image.bgColor}}};const w=c({name:"u-image",mixins:[i,e,y],data(){return{isError:!1,loading:!0,opacity:1,durationTime:this.duration,backgroundStyle:{},show:!1}},watch:{src:{immediate:!0,handler(i){i?(this.isError=!1,this.loading=!0):this.isError=!0}}},computed:{wrapStyle(){let i={};return i.width=this.$u.addUnit(this.width),i.height=this.$u.addUnit(this.height),i.borderRadius="circle"==this.shape?"10000px":uni.$u.addUnit(this.radius),i.overflow=this.radius>0?"hidden":"visible",uni.$u.deepMerge(i,uni.$u.addStyle(this.customStyle))}},mounted(){this.show=!0},emits:["click","error","load"],methods:{onClick(){this.$emit("click")},onErrorHandler(i){this.loading=!1,this.isError=!0,this.$emit("error",i)},onLoadHandler(i){this.loading=!1,this.isError=!1,this.$emit("load",i),this.removeBgColor()},removeBgColor(){this.backgroundStyle={backgroundColor:"transparent"}}}},[["render",function(i,e,c,y,w,$){const f=l,b=g(o("u-icon"),p),_=h,S=g(o("u-transition"),m);return r(),a(S,{mode:"fade",show:w.show,duration:i.fade?1e3:0},{default:t((()=>[s(_,{class:"u-image",onClick:$.onClick,style:d([$.wrapStyle,w.backgroundStyle])},{default:t((()=>[w.isError?n("",!0):(r(),a(f,{key:0,src:i.src,mode:i.mode,onError:$.onErrorHandler,onLoad:$.onLoadHandler,"show-menu-by-longpress":i.showMenuByLongpress,"lazy-load":i.lazyLoad,class:"u-image__image",style:d({borderRadius:"circle"==i.shape?"10000px":i.$u.addUnit(i.radius),width:i.$u.addUnit(i.width),height:i.$u.addUnit(i.height)})},null,8,["src","mode","onError","onLoad","show-menu-by-longpress","lazy-load","style"])),i.showLoading&&w.loading?(r(),a(_,{key:1,class:"u-image__loading",style:d({borderRadius:"circle"==i.shape?"50%":i.$u.addUnit(i.radius),backgroundColor:this.bgColor,width:i.$u.addUnit(i.width),height:i.$u.addUnit(i.height)})},{default:t((()=>[u(i.$slots,"loading",{},(()=>[s(b,{name:i.loadingIcon,width:i.width,height:i.height},null,8,["name","width","height"])]),!0)])),_:3},8,["style"])):n("",!0),i.showError&&w.isError&&!w.loading?(r(),a(_,{key:2,class:"u-image__error",style:d({borderRadius:"circle"==i.shape?"50%":i.$u.addUnit(i.radius),width:i.$u.addUnit(i.width),height:i.$u.addUnit(i.height)})},{default:t((()=>[u(i.$slots,"error",{},(()=>[s(b,{name:i.errorIcon,width:i.width,height:i.height},null,8,["name","width","height"])]),!0)])),_:3},8,["style"])):n("",!0)])),_:3},8,["onClick","style"])])),_:3},8,["show","duration"])}],["__scopeId","data-v-f2f94a4d"]]);export{w as _,y as p};
