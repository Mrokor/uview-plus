import{_ as e}from"./u-icon.2688b39a.js";import{m as t,f as o,d as l,o as a,c as i,w as s,n,a as u,b as c,F as d,r,l as h,h as p,s as m,i as _,x as f,p as v,j as g,t as b,k as C}from"./index-54bebc70.js";import{r as k}from"./uni-app.es.de3a25fd.js";import{_ as y}from"./u-cell.e9e083a0.js";import{_ as w}from"./u-cell-group.f38ca77c.js";import{_ as $}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as S}from"./u-button.0ee8f67a.js";import{_ as x}from"./u-subsection.7c5a3469.js";import"./u-line.22949a19.js";import"./u-loading-icon.9756d199.js";const I=$({name:"u-dropdown-item",mixins:[t,o,{props:{modelValue:{type:[Number,String,Array],default:""},title:{type:[String,Number],default:""},options:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},height:{type:[Number,String],default:"auto"},closeOnClickOverlay:{type:Boolean,default:!0}}}],options:{styleIsolation:"shared"},data:()=>({active:!1,activeColor:"#2979ff",inactiveColor:"#606266"}),computed:{propsChange(){return`${this.title}-${this.disabled}`}},watch:{propsChange(e){this.parent&&this.parent.init()}},created(){this.parent=!1},emits:["update:modelValue","change"],methods:{init(){let e=this.$u.$parent.call(this,"u-dropdown");if(e){this.parent=e,this.activeColor=e.activeColor,this.inactiveColor=e.inactiveColor,e.children.find((e=>this===e))||e.children.push(this),1==e.children.length&&(this.active=!0),e.menuList.push({title:this.title,disabled:this.disabled})}},cellClick(e){this.$emit("update:modelValue",e),this.parent.close(),this.$emit("change",e)}},mounted(){this.init()}},[["render",function(t,o,v,g,b,C){const $=k(l("up-icon"),e),S=k(l("up-cell"),y),x=k(l("up-cell-group"),w),I=_,B=f;return b.active?(a(),i(I,{key:0,class:"u-dropdown-item",onTouchmove:m((()=>{}),["stop","prevent"]),onClick:m((()=>{}),["stop","prevent"])},{default:s((()=>[t.$slots.default||t.$slots.$default?p(t.$slots,"default",{key:1},void 0,!0):(a(),i(B,{key:0,"scroll-y":"true",style:n({height:t.$u.addUnit(t.height)})},{default:s((()=>[u(I,{class:"u-dropdown-item__options"},{default:s((()=>[u(x,null,{default:s((()=>[(a(!0),c(d,null,r(t.options,((e,o)=>(a(),i(S,{onClick:t=>C.cellClick(e.value),arrow:!1,title:e.label,key:o,"title-style":{color:t.modelValue==e.value?b.activeColor:b.inactiveColor}},{default:s((()=>[t.modelValue==e.value?(a(),i($,{key:0,name:"checkbox-mark",color:b.activeColor,size:"32"},null,8,["color"])):h("",!0)])),_:2},1032,["onClick","title","title-style"])))),128))])),_:1})])),_:1})])),_:1},8,["style"]))])),_:3})):h("",!0)}],["__scopeId","data-v-7281a373"]]);const B=$({name:"u-dropdown",mixins:[t,o,{props:{activeColor:{type:String,default:"#2979ff"},inactiveColor:{type:String,default:"#606266"},closeOnClickMask:{type:Boolean,default:!0},closeOnClickSelf:{type:Boolean,default:!0},duration:{type:[Number,String],default:300},height:{type:[Number,String],default:40},borderBottom:{type:Boolean,default:!1},titleSize:{type:[Number,String],default:14},borderRadius:{type:[Number,String],default:0},menuIcon:{type:String,default:"arrow-down"},menuIconSize:{type:[Number,String],default:14}}}],data:()=>({showDropdown:!0,menuList:[],active:!1,current:99999,contentStyle:{zIndex:-1,opacity:0},highlightIndex:99999,contentHeight:0}),computed:{popupStyle(){let e={};return e.transform=`translateY(${this.active?0:"-100%"})`,e["transition-duration"]=this.duration/1e3+"s",e.borderRadius=`0 0 ${this.$u.addUnit(this.borderRadius)} ${this.$u.addUnit(this.borderRadius)}`,e}},created(){this.children=[]},mounted(){this.getContentHeight()},emits:["open","close"],methods:{init(){this.menuList=[],this.children.map((e=>{e.init()}))},menuClick(e){if(!this.menuList[e].disabled)return e===this.current&&this.closeOnClickSelf?(this.close(),void setTimeout((()=>{this.children[e].active=!1}),this.duration)):void this.open(e)},open(e){this.contentHeight<1&&this.getContentHeight(),this.contentStyle={zIndex:11},this.active=!0,this.current=e,this.children.map(((t,o)=>{t.active=e==o})),this.$emit("open",this.current)},close(){this.$emit("close",this.current),this.active=!1,this.current=99999,this.contentStyle={zIndex:-1,opacity:0}},maskClick(){this.closeOnClickMask&&this.close()},highlight(e=void 0){this.highlightIndex=void 0!==e?e:99999},getContentHeight(){let e=this.$u.sys().windowHeight;this.$uGetRect(".u-dropdown__menu").then((t=>{this.contentHeight=e-t.bottom}))}}},[["render",function(t,o,h,f,y,w){const $=C,S=k(l("u-icon"),e),x=_;return a(),i(x,{class:"u-dropdown"},{default:s((()=>[u(x,{class:v(["u-dropdown__menu",{"u-border-bottom":t.borderBottom}]),style:n({height:t.$u.addUnit(t.height)})},{default:s((()=>[(a(!0),c(d,null,r(y.menuList,((e,o)=>(a(),i(x,{class:"u-dropdown__menu__item",key:o,onClick:m((e=>w.menuClick(o)),["stop"])},{default:s((()=>[u(x,{class:"u-flex u-flex-row"},{default:s((()=>[u($,{class:"u-dropdown__menu__item__text",style:n({color:e.disabled?"#c0c4cc":o===y.current||y.highlightIndex==o?t.activeColor:t.inactiveColor,fontSize:t.$u.addUnit(t.titleSize)})},{default:s((()=>[g(b(e.title),1)])),_:2},1032,["style"]),u(x,{class:v(["u-dropdown__menu__item__arrow",{"u-dropdown__menu__item__arrow--rotate":o===y.current}])},{default:s((()=>[u(S,{"custom-style":{display:"flex"},name:t.menuIcon,size:t.$u.addUnit(t.menuIconSize),color:o===y.current||y.highlightIndex==o?t.activeColor:"#c0c4cc"},null,8,["name","size","color"])])),_:2},1032,["class"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["style","class"]),u(x,{class:"u-dropdown__content",style:n([y.contentStyle,{transition:`opacity ${t.duration/1e3}s linear`,top:t.$u.addUnit(t.height),height:y.contentHeight+"px"}]),onClick:w.maskClick,onTouchmove:o[1]||(o[1]=m((()=>{}),["stop","prevent"]))},{default:s((()=>[u(x,{onClick:o[0]||(o[0]=m((()=>{}),["stop","prevent"])),class:"u-dropdown__content__popup",style:n([w.popupStyle])},{default:s((()=>[p(t.$slots,"default",{},void 0,!0)])),_:3},8,["style"]),u(x,{class:"u-dropdown__content__mask"})])),_:3},8,["style","onClick"])])),_:3})}],["__scopeId","data-v-1cb89100"]]);const j=$({data:()=>({value1:"",value2:"2",mask:!0,options1:[{label:"默认排序",value:1},{label:"距离优先",value:2},{label:"价格优先",value:3}],options2:[{label:"去冰",value:1},{label:"加冰",value:2},{label:"正常温",value:3},{label:"加热",value:4},{label:"极寒风暴",value:5}],list:[{label:"琪花瑶草",active:!0},{label:"清词丽句",active:!1},{label:"宛转蛾眉",active:!1},{label:"煦色韶光",active:!1},{label:"鱼沉雁落",active:!1},{label:"章台杨柳",active:!1},{label:"霞光万道",active:!1}],borderBottom:!1,activeColor:"#2979ff"}),methods:{borderChange(e){this.borderBottom=!e},activeColorChange(e){this.activeColor=["#2979ff","#ff9900","#19be6b"][e]},change(e){this.$u.toast(`点击了第${e}项`)},closeDropdown(){this.$refs.uDropdownRef.close()},tagClick(e){this.list[e].active=!this.list[e].active},maskChange(e){this.mask=!e}}},[["render",function(e,t,o,n,h,p){const m=k(l("up-dropdown-item"),I),f=_,y=k(l("up-button"),S),w=k(l("up-dropdown"),B),$=C,j=k(l("up-subsection"),x);return a(),i(f,{class:"u-page"},{default:s((()=>[u(f,{class:"u-m-p-50"},{default:s((()=>[u(f,{class:"u-demo-area u-flex u-row-center"},{default:s((()=>[u(w,{"close-on-click-mask":h.mask,ref:"uDropdownRef",activeColor:h.activeColor,borderBottom:h.borderBottom},{default:s((()=>[u(m,{onChange:p.change,modelValue:h.value1,"onUpdate:modelValue":t[0]||(t[0]=e=>h.value1=e),title:"距离",options:h.options1},null,8,["onChange","modelValue","options"]),u(m,{onChange:p.change,modelValue:h.value2,"onUpdate:modelValue":t[1]||(t[1]=e=>h.value2=e),title:"温度",options:h.options2},null,8,["onChange","modelValue","options"]),u(m,{title:"属性"},{default:s((()=>[u(f,{class:"slot-content"},{default:s((()=>[u(f,{class:"item-box"},{default:s((()=>[(a(!0),c(d,null,r(h.list,((e,t)=>(a(),i(f,{class:v(["item",[e.active?"active":""]]),onClick:e=>p.tagClick(t),key:t},{default:s((()=>[g(b(e.label),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),u(y,{type:"primary",onClick:p.closeDropdown},{default:s((()=>[g("确定")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["close-on-click-mask","activeColor","borderBottom"])])),_:1})])),_:1}),u(f,{class:"u-config-wrap"},{default:s((()=>[u(f,{class:"u-demo-block"},{default:s((()=>[u($,{class:"u-demo-block__title"},{default:s((()=>[g("参数配置")])),_:1})])),_:1}),u(f,{class:"u-demo-block"},{default:s((()=>[u($,{class:"u-demo-block__title"},{default:s((()=>[g("下边框")])),_:1}),u(f,{class:"u-demo-block__content"},{default:s((()=>[u(j,{current:"1",list:["有","无"],onChange:p.borderChange},null,8,["onChange"])])),_:1})])),_:1}),u(f,{class:"u-demo-block"},{default:s((()=>[u($,{class:"u-demo-block__title"},{default:s((()=>[g("激活颜色")])),_:1}),u(f,{class:"u-demo-block__content"},{default:s((()=>[u(j,{list:["#2979ff","#ff9900","#19be6b"],onChange:p.activeColorChange},null,8,["onChange"])])),_:1})])),_:1}),u(f,{class:"u-demo-block"},{default:s((()=>[u($,{class:"u-demo-block__title"},{default:s((()=>[g("遮罩是否可点击")])),_:1}),u(f,{class:"u-demo-block__content"},{default:s((()=>[u(j,{list:["是","否"],onChange:p.maskChange},null,8,["onChange"])])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-221b2087"]]);export{j as default};
