import{o as e,c as l,w as o,b as t,F as a,r as u,n,g as d,t as s,f as i,a as c,i as r,h as m,I as p,d as h}from"./index-4f0c5e1d.js";import{m as _,a as f}from"./mixin.d0c91ebc.js";import{_ as b}from"./_plugin-vue_export-helper.1b428a4d.js";import{r as g}from"./uni-app.es.fcad82c0.js";const y=b({name:"u-code-input",mixins:[_,f,{props:{adjustPosition:{type:Boolean,default:()=>uni.$u.props.codeInput.adjustPosition},maxlength:{type:[String,Number],default:()=>uni.$u.props.codeInput.maxlength},dot:{type:Boolean,default:()=>uni.$u.props.codeInput.dot},mode:{type:String,default:()=>uni.$u.props.codeInput.mode},hairline:{type:Boolean,default:()=>uni.$u.props.codeInput.hairline},space:{type:[String,Number],default:()=>uni.$u.props.codeInput.space},modelValue:{type:[String,Number],default:()=>uni.$u.props.codeInput.value},focus:{type:Boolean,default:()=>uni.$u.props.codeInput.focus},bold:{type:Boolean,default:()=>uni.$u.props.codeInput.bold},color:{type:String,default:()=>uni.$u.props.codeInput.color},fontSize:{type:[String,Number],default:()=>uni.$u.props.codeInput.fontSize},size:{type:[String,Number],default:()=>uni.$u.props.codeInput.size},disabledKeyboard:{type:Boolean,default:()=>uni.$u.props.codeInput.disabledKeyboard},borderColor:{type:String,default:()=>uni.$u.props.codeInput.borderColor},disabledDot:{type:Boolean,default:()=>uni.$u.props.codeInput.disabledDot}}}],data(){return{inputValue:"",isFocus:this.focus}},watch:{modelValue:{immediate:!0,handler(e){this.inputValue=String(e).substring(0,this.maxlength)}}},computed:{codeLength(){return new Array(Number(this.maxlength))},itemStyle(){return e=>{const l=uni.$u.addUnit,o={width:l(this.size),height:l(this.size)};return"box"===this.mode&&(o.border=`${this.hairline?.5:1}px solid ${this.borderColor}`,0===uni.$u.getPx(this.space)&&(0===e&&(o.borderTopLeftRadius="3px",o.borderBottomLeftRadius="3px"),e===this.codeLength.length-1&&(o.borderTopRightRadius="3px",o.borderBottomRightRadius="3px"),e!==this.codeLength.length-1&&(o.borderRight="none"))),e!==this.codeLength.length-1?o.marginRight=l(this.space):o.marginRight=0,o}},codeArray(){return String(this.inputValue).split("")},lineStyle(){const e={};return e.height=this.hairline?"2px":"4px",e.width=uni.$u.addUnit(this.size),e.backgroundColor=this.borderColor,e}},emits:["change","finish","update:modelValue"],methods:{inputHandler(e){const l=e.detail.value;this.inputValue=l,this.disabledDot&&this.$nextTick((()=>{this.inputValue=l.replace(".","")})),this.$emit("change",l),this.$emit("update:modelValue",l),String(l).length>=Number(this.maxlength)&&this.$emit("finish",l)}}},[["render",function(h,_,f,b,g,y){const x=r,V=m,v=p;return e(),l(x,{class:"u-code-input"},{default:o((()=>[(e(!0),t(a,null,u(y.codeLength,((t,a)=>(e(),l(x,{class:"u-code-input__item",style:n([y.itemStyle(a)]),key:a},{default:o((()=>[h.dot&&y.codeArray.length>a?(e(),l(x,{key:0,class:"u-code-input__item__dot"})):(e(),l(V,{key:1,style:n({fontSize:h.$u.addUnit(h.fontSize),fontWeight:h.bold?"bold":"normal",color:h.color})},{default:o((()=>[d(s(y.codeArray[a]),1)])),_:2},1032,["style"])),"line"===h.mode?(e(),l(x,{key:2,class:"u-code-input__item__line",style:n([y.lineStyle])},null,8,["style"])):i("v-if",!0),g.isFocus&&y.codeArray.length===a?(e(),l(x,{key:3,style:n({backgroundColor:h.color}),class:"u-code-input__item__cursor"},null,8,["style"])):i("v-if",!0)])),_:2},1032,["style"])))),128)),c(v,{disabled:h.disabledKeyboard,type:"number",focus:h.focus,value:g.inputValue,maxlength:h.maxlength,adjustPosition:h.adjustPosition,class:"u-code-input__input",onInput:y.inputHandler,style:n({height:h.$u.addUnit(h.size)}),onFocus:_[0]||(_[0]=e=>g.isFocus=!0),onBlur:_[1]||(_[1]=e=>g.isFocus=!1)},null,8,["disabled","focus","value","maxlength","adjustPosition","onInput","style"])])),_:1})}],["__scopeId","data-v-5f23cb49"]]);const x=b({data:()=>({value1:"",value2:"",value3:"",value4:"",value5:"",value6:"",value7:"",value8:"",value9:"123",value10:"34"}),methods:{change(e){console.log("change",e)},finish(e){console.log("finish",e)}}},[["render",function(t,a,u,n,s,i){const p=m,_=g(h("u-code-input"),y),f=r;return e(),l(f,{class:"u-page"},{default:o((()=>[c(f,{class:"u-demo-block"},{default:o((()=>[c(p,{class:"u-demo-block__title"},{default:o((()=>[d("基础使用")])),_:1}),c(f,{class:"u-demo-block__content"},{default:o((()=>[c(_,{modelValue:s.value1,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value1=e),maxlength:4,onChange:i.change,onFinish:i.finish},null,8,["modelValue","onChange","onFinish"])])),_:1})])),_:1}),c(f,{class:"u-demo-block"},{default:o((()=>[c(p,{class:"u-demo-block__title"},{default:o((()=>[d("横线模式")])),_:1}),c(f,{class:"u-demo-block__content"},{default:o((()=>[c(_,{modelValue:s.value2,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value2=e),mode:"line",maxlength:4,bold:!0},null,8,["modelValue"])])),_:1})])),_:1}),c(f,{class:"u-demo-block"},{default:o((()=>[c(p,{class:"u-demo-block__title"},{default:o((()=>[d("设置长度")])),_:1}),c(f,{class:"u-demo-block__content"},{default:o((()=>[c(_,{modelValue:s.value3,"onUpdate:modelValue":a[2]||(a[2]=e=>s.value3=e),maxlength:6},null,8,["modelValue"])])),_:1})])),_:1}),c(f,{class:"u-demo-block"},{default:o((()=>[c(p,{class:"u-demo-block__title"},{default:o((()=>[d("设置间距")])),_:1}),c(f,{class:"u-demo-block__content"},{default:o((()=>[c(_,{modelValue:s.value4,"onUpdate:modelValue":a[3]||(a[3]=e=>s.value4=e),mode:"box",space:0,maxlength:4},null,8,["modelValue"])])),_:1})])),_:1}),c(f,{class:"u-demo-block"},{default:o((()=>[c(p,{class:"u-demo-block__title"},{default:o((()=>[d("细边框")])),_:1}),c(f,{class:"u-demo-block__content"},{default:o((()=>[c(_,{modelValue:s.value5,"onUpdate:modelValue":a[4]||(a[4]=e=>s.value5=e),mode:"box",space:0,maxlength:4,hairline:""},null,8,["modelValue"])])),_:1}),c(f,{class:"u-demo-block__content",style:{"margin-top":"10px"}},{default:o((()=>[c(_,{modelValue:s.value6,"onUpdate:modelValue":a[5]||(a[5]=e=>s.value6=e),mode:"line",space:10,maxlength:4,hairline:""},null,8,["modelValue"])])),_:1})])),_:1}),c(f,{class:"u-demo-block"},{default:o((()=>[c(p,{class:"u-demo-block__title"},{default:o((()=>[d("调整颜色")])),_:1}),c(f,{class:"u-demo-block__content"},{default:o((()=>[c(_,{modelValue:s.value7,"onUpdate:modelValue":a[6]||(a[6]=e=>s.value7=e),mode:"box",space:0,maxlength:4,hairline:"",color:"#f56c6c",borderColor:"#f56c6c"},null,8,["modelValue"]),c(f,{class:"u-demo-block__content",style:{"margin-top":"10px"}},{default:o((()=>[c(_,{modelValue:s.value10,"onUpdate:modelValue":a[7]||(a[7]=e=>s.value10=e),mode:"line",size:"30",maxlength:4,hairline:"",color:"#3c9cff",borderColor:"#3c9cff"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),c(f,{class:"u-demo-block"},{default:o((()=>[c(p,{class:"u-demo-block__title"},{default:o((()=>[d("点模式")])),_:1}),c(f,{class:"u-demo-block__content"},{default:o((()=>[c(_,{modelValue:s.value8,"onUpdate:modelValue":a[8]||(a[8]=e=>s.value8=e),mode:"box",dot:"",space:0,maxlength:4,hairline:""},null,8,["modelValue"])])),_:1})])),_:1}),c(f,{class:"u-demo-block"},{default:o((()=>[c(p,{class:"u-demo-block__title"},{default:o((()=>[d("预置内容")])),_:1}),c(f,{class:"u-demo-block__content"},{default:o((()=>[c(_,{modelValue:s.value9,"onUpdate:modelValue":a[9]||(a[9]=e=>s.value9=e),mode:"box",space:0,maxlength:4,hairline:"",fontSize:"17"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})}]]);export{x as default};
