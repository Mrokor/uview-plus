import{o as e,c as t,w as a,a as o,n,g as r,t as i,f as u,l,C as s,h as d,i as c,j as p}from"./index-aa2b8fb8.js";import{m as h,a as m}from"./mixin.d0c91ebc.js";import{_ as f}from"./_plugin-vue_export-helper.1b428a4d.js";const g={props:{value:{type:[String,Number],default:()=>uni.$u.props.textarea.value},modelValue:{type:[String,Number],default:()=>uni.$u.props.textarea.value},placeholder:{type:[String,Number],default:()=>uni.$u.props.textarea.placeholder},placeholderClass:{type:String,default:()=>uni.$u.props.input.placeholderClass},placeholderStyle:{type:[String,Object],default:()=>uni.$u.props.input.placeholderStyle},height:{type:[String,Number],default:()=>uni.$u.props.textarea.height},confirmType:{type:String,default:()=>uni.$u.props.textarea.confirmType},disabled:{type:Boolean,default:()=>uni.$u.props.textarea.disabled},count:{type:Boolean,default:()=>uni.$u.props.textarea.count},focus:{type:Boolean,default:()=>uni.$u.props.textarea.focus},autoHeight:{type:Boolean,default:()=>uni.$u.props.textarea.autoHeight},fixed:{type:Boolean,default:()=>uni.$u.props.textarea.fixed},cursorSpacing:{type:Number,default:()=>uni.$u.props.textarea.cursorSpacing},cursor:{type:[String,Number],default:()=>uni.$u.props.textarea.cursor},showConfirmBar:{type:Boolean,default:()=>uni.$u.props.textarea.showConfirmBar},selectionStart:{type:Number,default:()=>uni.$u.props.textarea.selectionStart},selectionEnd:{type:Number,default:()=>uni.$u.props.textarea.selectionEnd},adjustPosition:{type:Boolean,default:()=>uni.$u.props.textarea.adjustPosition},disableDefaultPadding:{type:Boolean,default:()=>uni.$u.props.textarea.disableDefaultPadding},holdKeyboard:{type:Boolean,default:()=>uni.$u.props.textarea.holdKeyboard},maxlength:{type:[String,Number],default:()=>uni.$u.props.textarea.maxlength},border:{type:String,default:()=>uni.$u.props.textarea.border},formatter:{type:[Function,null],default:()=>uni.$u.props.textarea.formatter},ignoreCompositionEvent:{type:Boolean,default:!0}}};const y=f({name:"u--textarea",mixins:[h,g,m],components:{uvTextarea:f({name:"u-textarea",mixins:[h,m,g],data:()=>({innerValue:"",focused:!1,firstChange:!0,changeFromInner:!1,innerFormatter:e=>e}),created(){},watch:{modelValue:{immediate:!0,handler(e,t){this.innerValue=e,!1===this.firstChange&&!1===this.changeFromInner&&this.valueChange(),this.firstChange=!1,this.changeFromInner=!1}}},computed:{textareaClass(){let e=[],{border:t,disabled:a}=this;return"surround"===t&&(e=e.concat(["u-border","u-textarea--radius"])),"bottom"===t&&(e=e.concat(["u-border-bottom","u-textarea--no-radius"])),a&&e.push("u-textarea--disabled"),e.join(" ")},textareaStyle(){return uni.$u.deepMerge({},uni.$u.addStyle(this.customStyle))}},emits:["update:modelValue","linechange","focus","blur","change","confirm","keyboardheightchange"],methods:{setFormatter(e){this.innerFormatter=e},onFocus(e){this.$emit("focus",e)},onBlur(e){this.$emit("blur",e),uni.$u.formValidate(this,"blur")},onLinechange(e){this.$emit("linechange",e)},onInput(e){let{value:t=""}=e.detail||{};const a=(this.formatter||this.innerFormatter)(t);this.innerValue=t,this.$nextTick((()=>{this.innerValue=a,this.valueChange()}))},valueChange(){const e=this.innerValue;this.$nextTick((()=>{this.$emit("update:modelValue",e),this.changeFromInner=!0,this.$emit("change",e),uni.$u.formValidate(this,"change")}))},onConfirm(e){this.$emit("confirm",e)},onKeyboardheightchange(e){this.$emit("keyboardheightchange",e)}}},[["render",function(p,h,m,f,g,y){const x=s,b=d,$=c;return e(),t($,{class:l(["u-textarea",y.textareaClass]),style:n([y.textareaStyle])},{default:a((()=>[o(x,{class:"u-textarea__field",value:g.innerValue,style:n({height:p.$u.addUnit(p.height)}),placeholder:p.placeholder,"placeholder-style":p.$u.addStyle(p.placeholderStyle,"string"),"placeholder-class":p.placeholderClass,disabled:p.disabled,focus:p.focus,autoHeight:p.autoHeight,fixed:p.fixed,cursorSpacing:p.cursorSpacing,cursor:p.cursor,showConfirmBar:p.showConfirmBar,selectionStart:p.selectionStart,selectionEnd:p.selectionEnd,adjustPosition:p.adjustPosition,disableDefaultPadding:p.disableDefaultPadding,holdKeyboard:p.holdKeyboard,maxlength:p.maxlength,"confirm-type":p.confirmType,ignoreCompositionEvent:p.ignoreCompositionEvent,onFocus:y.onFocus,onBlur:y.onBlur,onLinechange:y.onLinechange,onInput:y.onInput,onConfirm:y.onConfirm,onKeyboardheightchange:y.onKeyboardheightchange},null,8,["value","style","placeholder","placeholder-style","placeholder-class","disabled","focus","autoHeight","fixed","cursorSpacing","cursor","showConfirmBar","selectionStart","selectionEnd","adjustPosition","disableDefaultPadding","holdKeyboard","maxlength","confirm-type","ignoreCompositionEvent","onFocus","onBlur","onLinechange","onInput","onConfirm","onKeyboardheightchange"]),p.count?(e(),t(b,{key:0,class:"u-textarea__count",style:n({"background-color":p.disabled?"transparent":"#fff"})},{default:a((()=>[r(i(g.innerValue.length)+"/"+i(p.maxlength),1)])),_:1},8,["style"])):u("v-if",!0)])),_:1},8,["class","style"])}],["__scopeId","data-v-6e86da50"]])}},[["render",function(a,o,n,r,i,u){const l=p("uvTextarea");return e(),t(l,{value:a.value,modelValue:a.modelValue,placeholder:a.placeholder,height:a.height,confirmType:a.confirmType,disabled:a.disabled,count:a.count,focus:a.focus,autoHeight:a.autoHeight,fixed:a.fixed,cursorSpacing:a.cursorSpacing,cursor:a.cursor,showConfirmBar:a.showConfirmBar,selectionStart:a.selectionStart,selectionEnd:a.selectionEnd,adjustPosition:a.adjustPosition,disableDefaultPadding:a.disableDefaultPadding,holdKeyboard:a.holdKeyboard,maxlength:a.maxlength,border:a.border,customStyle:a.customStyle,formatter:a.formatter,ignoreCompositionEvent:a.ignoreCompositionEvent,onInput:o[0]||(o[0]=e=>a.$emit("input",e)),"onUpdate:modelValue":o[1]||(o[1]=e=>a.$emit("update:modelValue",e))},null,8,["value","modelValue","placeholder","height","confirmType","disabled","count","focus","autoHeight","fixed","cursorSpacing","cursor","showConfirmBar","selectionStart","selectionEnd","adjustPosition","disableDefaultPadding","holdKeyboard","maxlength","border","customStyle","formatter","ignoreCompositionEvent"])}]]);export{y as _};
