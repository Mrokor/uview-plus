import{l as e,m as r,f as t,I as s,o as l,c as o,w as i,h,y as a,i as n,n as c,p as d,q as f,x as u,a as p,s as m,H as b}from"./index-24ae516a.js";import{_ as g}from"./_plugin-vue_export-helper.1b428a4d.js";const w=g({name:"u-list-item",mixins:[r,t,{props:{anchor:{type:[String,Number],default:()=>e.listItem.anchor}}}],data:()=>({rect:{},index:0,show:!0,sys:s()}),computed:{},inject:["uList"],watch:{"uList.innerScrollTop"(e){const r=this.uList.preLoadScreen,t=this.sys.windowHeight;e<=t*r?this.parent.updateOffsetFromChild(0):this.rect.top<=e-t*r&&this.parent.updateOffsetFromChild(this.rect.top)}},created(){this.parent={}},mounted(){this.init()},methods:{init(){this.updateParentData(),this.index=this.parent.children.indexOf(this),this.resize()},updateParentData(){this.getParentData("u-list")},resize(){this.queryRect(`u-list-item-${this.anchor}`).then((e=>{const r=this.parent.children[this.index-1];this.rect=e;const t=this.uList.preLoadScreen,s=this.sys.windowHeight;r&&(this.rect.top=r.rect.top+r.rect.height),e.top>=this.uList.innerScrollTop+(1+t)*s&&(this.show=!1)}))},queryRect(e){return new Promise((r=>{this.$uGetRect(`.${e}`).then((e=>{r(e)}))}))}}},[["render",function(e,r,t,s,c,d){const f=n;return l(),o(f,{class:a(["u-list-item",[`u-list-item-${e.anchor}`]]),ref:`u-list-item-${e.anchor}`,anchor:`u-list-item-${e.anchor}`},{default:i((()=>[h(e.$slots,"default",{},void 0,!0)])),_:3},8,["anchor","class"])}],["__scopeId","data-v-2c47b646"]]);const y=g({name:"u-list",mixins:[r,t,{props:{showScrollbar:{type:Boolean,default:()=>e.list.showScrollbar},lowerThreshold:{type:[String,Number],default:()=>e.list.lowerThreshold},upperThreshold:{type:[String,Number],default:()=>e.list.upperThreshold},scrollTop:{type:[String,Number],default:()=>e.list.scrollTop},offsetAccuracy:{type:[String,Number],default:()=>e.list.offsetAccuracy},enableFlex:{type:Boolean,default:()=>e.list.enableFlex},pagingEnabled:{type:Boolean,default:()=>e.list.pagingEnabled},scrollable:{type:Boolean,default:()=>e.list.scrollable},scrollIntoView:{type:String,default:()=>e.list.scrollIntoView},scrollWithAnimation:{type:Boolean,default:()=>e.list.scrollWithAnimation},enableBackToTop:{type:Boolean,default:()=>e.list.enableBackToTop},height:{type:[String,Number],default:()=>e.list.height},width:{type:[String,Number],default:()=>e.list.width},preLoadScreen:{type:[String,Number],default:()=>e.list.preLoadScreen},refresherEnabled:{type:Boolean,default:()=>!1},refresherThreshold:{type:Number,default:()=>45},refresherDefaultStyle:{type:String,default:()=>"black"},refresherBackground:{type:String,default:()=>"#FFF"},refresherTriggered:{type:Boolean,default:()=>!1}}}],watch:{scrollIntoView(e){this.scrollIntoViewById(e)}},data:()=>({innerScrollTop:0,offset:0,sys:s()}),computed:{listStyle(){const e={};return 0!=this.width&&(e.width=c(this.width)),0!=this.height&&(e.height=c(this.height)),e.height||(e.height=c(this.sys.windowHeight,"px")),d(e,f(this.customStyle))}},provide(){return{uList:this}},created(){this.refs=[],this.children=[],this.anchors=[]},mounted(){},emits:["scroll","scrolltolower","scrolltoupper","refresherpulling","refresherrefresh","refresherrestore","refresherabort"],methods:{updateOffsetFromChild(e){this.offset=e},onScroll(e){let r=0;r=e.detail.scrollTop,this.innerScrollTop=r,this.$emit("scroll",Math.abs(r))},scrollIntoViewById(e){},scrolltolower(e){u(30).then((()=>{this.$emit("scrolltolower")}))},scrolltoupper(e){u(30).then((()=>{this.$emit("scrolltoupper"),this.offset=0}))},refresherpulling(e){this.$emit("refresherpulling",e)},refresherrefresh(e){this.$emit("refresherrefresh",e)},refresherrestore(e){this.$emit("refresherrestore",e)},refresherabort(e){this.$emit("refresherabort",e)}}},[["render",function(e,r,t,s,a,c){const d=n,f=b;return l(),o(f,{class:"u-list","scroll-into-view":e.scrollIntoView,style:m([c.listStyle]),"scroll-y":e.scrollable,"scroll-top":Number(e.scrollTop),"lower-threshold":Number(e.lowerThreshold),"upper-threshold":Number(e.upperThreshold),"show-scrollbar":e.showScrollbar,"enable-back-to-top":e.enableBackToTop,"scroll-with-animation":e.scrollWithAnimation,onScroll:c.onScroll,onScrolltolower:c.scrolltolower,onScrolltoupper:c.scrolltoupper,"refresher-enabled":e.refresherEnabled,"refresher-threshold":e.refresherThreshold,"refresher-default-style":e.refresherDefaultStyle,"refresher-background":e.refresherBackground,"refresher-triggered":e.refresherTriggered,onRefresherpulling:c.refresherpulling,onRefresherrefresh:c.refresherrefresh,onRefresherrestore:c.refresherrestore,onRefresherabort:c.refresherabort},{default:i((()=>[p(d,null,{default:i((()=>[h(e.$slots,"default",{},void 0,!0)])),_:3})])),_:3},8,["scroll-into-view","style","scroll-y","scroll-top","lower-threshold","upper-threshold","show-scrollbar","enable-back-to-top","scroll-with-animation","onScroll","onScrolltolower","onScrolltoupper","refresher-enabled","refresher-threshold","refresher-default-style","refresher-background","refresher-triggered","onRefresherpulling","onRefresherrefresh","onRefresherrestore","onRefresherabort"])}],["__scopeId","data-v-c94d4f4e"]]);export{w as _,y as a};
