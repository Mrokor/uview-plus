import{_ as e}from"./u-icon.a07c8284.js";import{m as t,f as o,n as l,$ as a,d as i,o as s,c as n,w as u,s as c,a as d,b as r,F as h,r as p,u as m,h as _,D as f,i as v,H as g,I as b,y as C,j as k,t as y,k as w}from"./index-e6ab120b.js";import{r as S}from"./uni-app.es.eea47e9c.js";import{_ as x}from"./u-cell.459ca694.js";import{_ as $}from"./u-cell-group.90c05697.js";import{_ as I}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as B}from"./u-button.026d0661.js";import{_ as z}from"./u-subsection.979d70a0.js";import"./u-line.ae8dd613.js";import"./u-loading-icon.043443e2.js";const j=I({name:"u-dropdown-item",mixins:[t,o,{props:{modelValue:{type:[Number,String,Array],default:""},title:{type:[String,Number],default:""},options:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},height:{type:[Number,String],default:"auto"},closeOnClickOverlay:{type:Boolean,default:!0}}}],options:{styleIsolation:"shared"},data:()=>({active:!1,activeColor:"#2979ff",inactiveColor:"#606266"}),computed:{propsChange(){return`${this.title}-${this.disabled}`}},watch:{propsChange(e){this.parent&&this.parent.init()}},created(){this.parent=!1},emits:["update:modelValue","change"],methods:{addUnit:l,init(){let e=a.call(this,"u-dropdown");if(e){this.parent=e,this.activeColor=e.activeColor,this.inactiveColor=e.inactiveColor,e.children.find((e=>this===e))||e.children.push(this),1==e.children.length&&(this.active=!0),e.menuList.push({title:this.title,disabled:this.disabled})}},cellClick(e){this.$emit("update:modelValue",e),this.parent.close(),this.$emit("change",e)}},mounted(){this.init()}},[["render",function(t,o,l,a,b,C){const k=S(i("up-icon"),e),y=S(i("up-cell"),x),w=S(i("up-cell-group"),$),I=v,B=g;return b.active?(s(),n(I,{key:0,class:"u-dropdown-item",onTouchmove:f((()=>{}),["stop","prevent"]),onClick:f((()=>{}),["stop","prevent"])},{default:u((()=>[t.$slots.default||t.$slots.$default?_(t.$slots,"default",{key:1},void 0,!0):(s(),n(B,{key:0,class:"u-dropdown-item__scroll","scroll-y":"true",style:c({height:C.addUnit(t.height)})},{default:u((()=>[d(I,{class:"u-dropdown-item__options"},{default:u((()=>[d(w,null,{default:u((()=>[(s(!0),r(h,null,p(t.options,((e,o)=>(s(),n(y,{onClick:t=>C.cellClick(e.value),arrow:!1,title:e.label,key:o,"title-style":{color:t.modelValue==e.value?b.activeColor:b.inactiveColor}},{default:u((()=>[t.modelValue==e.value?(s(),n(k,{key:0,name:"checkbox-mark",color:b.activeColor,size:"32"},null,8,["color"])):m("",!0)])),_:2},1032,["onClick","title","title-style"])))),128))])),_:1})])),_:1})])),_:1},8,["style"]))])),_:3})):m("",!0)}],["__scopeId","data-v-cb728748"]]);const V=I({name:"u-dropdown",mixins:[t,o,{props:{activeColor:{type:String,default:"#2979ff"},inactiveColor:{type:String,default:"#606266"},closeOnClickMask:{type:Boolean,default:!0},closeOnClickSelf:{type:Boolean,default:!0},duration:{type:[Number,String],default:300},height:{type:[Number,String],default:40},borderBottom:{type:Boolean,default:!1},titleSize:{type:[Number,String],default:14},borderRadius:{type:[Number,String],default:0},menuIcon:{type:String,default:"arrow-down"},menuIconSize:{type:[Number,String],default:14}}}],data:()=>({showDropdown:!0,menuList:[],active:!1,current:99999,contentStyle:{zIndex:-1,opacity:0},highlightIndex:99999,contentHeight:0}),computed:{popupStyle(){let e={};return e.transform=`translateY(${this.active?0:"-100%"})`,e["transition-duration"]=this.duration/1e3+"s",e.borderRadius=`0 0 ${l(this.borderRadius)} ${l(this.borderRadius)}`,e}},created(){this.children=[]},mounted(){this.getContentHeight()},emits:["open","close"],methods:{addUnit:l,init(){this.menuList=[],this.children.map((e=>{e.init()}))},menuClick(e){if(!this.menuList[e].disabled)return e===this.current&&this.closeOnClickSelf?(this.close(),void setTimeout((()=>{this.children[e].active=!1}),this.duration)):void this.open(e)},open(e){this.contentHeight<1&&this.getContentHeight(),this.contentStyle={zIndex:11},this.active=!0,this.current=e,this.children.map(((t,o)=>{t.active=e==o})),this.$emit("open",this.current)},close(){this.$emit("close",this.current),this.active=!1,this.current=99999,this.contentStyle={zIndex:-1,opacity:0}},maskClick(){this.closeOnClickMask&&this.close()},highlight(e=void 0){this.highlightIndex=void 0!==e?e:99999},getContentHeight(){let e=b().windowHeight;this.$uGetRect(".u-dropdown__menu").then((t=>{this.contentHeight=e-t.bottom}))}}},[["render",function(t,o,l,a,m,g){const b=w,x=S(i("u-icon"),e),$=v;return s(),n($,{class:"u-dropdown"},{default:u((()=>[d($,{class:C(["u-dropdown__menu",{"u-border-bottom":t.borderBottom}]),style:c({height:g.addUnit(t.height)})},{default:u((()=>[(s(!0),r(h,null,p(m.menuList,((e,o)=>(s(),n($,{class:"u-dropdown__menu__item",key:o,onClick:f((e=>g.menuClick(o)),["stop"])},{default:u((()=>[d($,{class:"u-flex u-flex-row"},{default:u((()=>[d(b,{class:"u-dropdown__menu__item__text",style:c({color:e.disabled?"#c0c4cc":o===m.current||m.highlightIndex==o?t.activeColor:t.inactiveColor,fontSize:g.addUnit(t.titleSize)})},{default:u((()=>[k(y(e.title),1)])),_:2},1032,["style"]),d($,{class:C(["u-dropdown__menu__item__arrow",{"u-dropdown__menu__item__arrow--rotate":o===m.current}])},{default:u((()=>[d(x,{"custom-style":{display:"flex"},name:t.menuIcon,size:g.addUnit(t.menuIconSize),color:o===m.current||m.highlightIndex==o?t.activeColor:"#c0c4cc"},null,8,["name","size","color"])])),_:2},1032,["class"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["style","class"]),d($,{class:"u-dropdown__content",style:c([m.contentStyle,{transition:`opacity ${t.duration/1e3}s linear`,top:g.addUnit(t.height),height:m.contentHeight+"px"}]),onClick:g.maskClick,onTouchmove:o[1]||(o[1]=f((()=>{}),["stop","prevent"]))},{default:u((()=>[d($,{onClick:o[0]||(o[0]=f((()=>{}),["stop","prevent"])),class:"u-dropdown__content__popup",style:c([g.popupStyle])},{default:u((()=>[_(t.$slots,"default",{},void 0,!0)])),_:3},8,["style"]),d($,{class:"u-dropdown__content__mask"})])),_:3},8,["style","onClick"])])),_:3})}],["__scopeId","data-v-2076d705"]]);const H=I({data:()=>({value1:"",value2:"2",mask:!0,options1:[{label:"默认排序",value:1},{label:"距离优先",value:2},{label:"价格优先",value:3}],options2:[{label:"去冰",value:1},{label:"加冰",value:2},{label:"正常温",value:3},{label:"加热",value:4},{label:"极寒风暴",value:5}],list:[{label:"琪花瑶草",active:!0},{label:"清词丽句",active:!1},{label:"宛转蛾眉",active:!1},{label:"煦色韶光",active:!1},{label:"鱼沉雁落",active:!1},{label:"章台杨柳",active:!1},{label:"霞光万道",active:!1}],borderBottom:!1,activeColor:"#2979ff"}),methods:{borderChange(e){this.borderBottom=!e},activeColorChange(e){this.activeColor=["#2979ff","#ff9900","#19be6b"][e]},change(e){this.$u.toast(`点击了第${e}项`)},closeDropdown(){this.$refs.uDropdownRef.close()},tagClick(e){this.list[e].active=!this.list[e].active},maskChange(e){this.mask=!e}}},[["render",function(e,t,o,l,a,c){const m=S(i("up-dropdown-item"),j),_=v,f=S(i("up-button"),B),g=S(i("up-dropdown"),V),b=w,x=S(i("up-subsection"),z);return s(),n(_,{class:"u-page"},{default:u((()=>[d(_,{class:"u-m-p-50"},{default:u((()=>[d(_,{class:"u-demo-area u-flex u-row-center"},{default:u((()=>[d(g,{"close-on-click-mask":a.mask,ref:"uDropdownRef",activeColor:a.activeColor,borderBottom:a.borderBottom},{default:u((()=>[d(m,{onChange:c.change,modelValue:a.value1,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value1=e),title:"距离",options:a.options1},null,8,["onChange","modelValue","options"]),d(m,{onChange:c.change,modelValue:a.value2,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value2=e),title:"温度",options:a.options2},null,8,["onChange","modelValue","options"]),d(m,{title:"属性"},{default:u((()=>[d(_,{class:"slot-content"},{default:u((()=>[d(_,{class:"item-box"},{default:u((()=>[(s(!0),r(h,null,p(a.list,((e,t)=>(s(),n(_,{class:C(["item",[e.active?"active":""]]),onClick:e=>c.tagClick(t),key:t},{default:u((()=>[k(y(e.label),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),d(f,{type:"primary",onClick:c.closeDropdown},{default:u((()=>[k("确定")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["close-on-click-mask","activeColor","borderBottom"])])),_:1})])),_:1}),d(_,{class:"u-config-wrap"},{default:u((()=>[d(_,{class:"u-demo-block"},{default:u((()=>[d(b,{class:"u-demo-block__title"},{default:u((()=>[k("参数配置")])),_:1})])),_:1}),d(_,{class:"u-demo-block"},{default:u((()=>[d(b,{class:"u-demo-block__title"},{default:u((()=>[k("下边框")])),_:1}),d(_,{class:"u-demo-block__content"},{default:u((()=>[d(x,{current:"1",list:["有","无"],onChange:c.borderChange},null,8,["onChange"])])),_:1})])),_:1}),d(_,{class:"u-demo-block"},{default:u((()=>[d(b,{class:"u-demo-block__title"},{default:u((()=>[k("激活颜色")])),_:1}),d(_,{class:"u-demo-block__content"},{default:u((()=>[d(x,{list:["#2979ff","#ff9900","#19be6b"],onChange:c.activeColorChange},null,8,["onChange"])])),_:1})])),_:1}),d(_,{class:"u-demo-block"},{default:u((()=>[d(b,{class:"u-demo-block__title"},{default:u((()=>[k("遮罩是否可点击")])),_:1}),d(_,{class:"u-demo-block__content"},{default:u((()=>[d(x,{list:["是","否"],onChange:c.maskChange},null,8,["onChange"])])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-221b2087"]]);export{H as default};
