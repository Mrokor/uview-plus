import{m as t,f as e,o as i,c as s,w as n,a as r,p as o,n as u,b as l,F as c,r as a,j as b,t as d,i as h,k as p}from"./index-3f6b02a2.js";import{_ as m}from"./_plugin-vue_export-helper.1b428a4d.js";const _=m({name:"u-subsection",mixins:[t,e,{props:{list:{type:Array,default:()=>uni.$u.props.subsection.list},current:{type:[String,Number],default:()=>uni.$u.props.subsection.current},activeColor:{type:String,default:()=>uni.$u.props.subsection.activeColor},inactiveColor:{type:String,default:()=>uni.$u.props.subsection.inactiveColor},mode:{type:String,default:()=>uni.$u.props.subsection.mode},fontSize:{type:[String,Number],default:()=>uni.$u.props.subsection.fontSize},bold:{type:Boolean,default:()=>uni.$u.props.subsection.bold},bgColor:{type:String,default:()=>uni.$u.props.subsection.bgColor},keyName:{type:String,default:()=>uni.$u.props.subsection.keyName}}}],data:()=>({itemRect:{width:0,height:0},innerCurrent:"",windowResizeCallback:{}}),watch:{list(t,e){this.init()},current:{immediate:!0,handler(t){t!==this.innerCurrent&&(this.innerCurrent=t)}}},computed:{wrapperStyle(){const t={};return"button"===this.mode&&(t.backgroundColor=this.bgColor),t},barStyle(){const t={};return t.width=`${this.itemRect.width}px`,t.height=`${this.itemRect.height}px`,t.transform=`translateX(${this.innerCurrent*this.itemRect.width}px)`,"subsection"===this.mode&&(t.backgroundColor=this.activeColor),t},itemStyle(t){return t=>{const e={};return"subsection"===this.mode&&(e.borderColor=this.activeColor,e.borderWidth="1px",e.borderStyle="solid"),e}},textStyle(t){return t=>{const e={};return e.fontWeight=this.bold&&this.innerCurrent===t?"bold":"normal",e.fontSize=uni.$u.addUnit(this.fontSize),"subsection"===this.mode?e.color=this.innerCurrent===t?"#fff":this.inactiveColor:e.color=this.innerCurrent===t?this.activeColor:this.inactiveColor,e}}},mounted(){this.init(),this.windowResizeCallback=t=>{this.init()},uni.onWindowResize(this.windowResizeCallback)},beforeUnmount(){uni.offWindowResize(this.windowResizeCallback)},emits:["change"],methods:{init(){this.innerCurrent=this.current,uni.$u.sleep().then((()=>this.getRect()))},getText(t){return"object"==typeof t?t[this.keyName]:t},getRect(){this.$uGetRect(".u-subsection__item--0").then((t=>{this.itemRect=t}))},clickHandler(t){this.innerCurrent=t,this.$emit("change",t)}}},[["render",function(t,e,m,_,f,y){const C=h,g=p;return i(),s(C,{class:o(["u-subsection",[`u-subsection--${t.mode}`]]),ref:"u-subsection",style:u([t.$u.addStyle(t.customStyle),y.wrapperStyle])},{default:n((()=>[r(C,{class:o(["u-subsection__bar cursor-pointer",["button"===t.mode&&"u-subsection--button__bar",0===f.innerCurrent&&"subsection"===t.mode&&"u-subsection__bar--first",f.innerCurrent>0&&f.innerCurrent<t.list.length-1&&"subsection"===t.mode&&"u-subsection__bar--center",f.innerCurrent===t.list.length-1&&"subsection"===t.mode&&"u-subsection__bar--last"]]),ref:"u-subsection__bar",style:u([y.barStyle])},null,8,["style","class"]),(i(!0),l(c,null,a(t.list,((e,l)=>(i(),s(C,{class:o(["u-subsection__item cursor-pointer",[`u-subsection__item--${l}`,l<t.list.length-1&&"u-subsection__item--no-border-right",0===l&&"u-subsection__item--first",l===t.list.length-1&&"u-subsection__item--last"]]),ref_for:!0,ref:`u-subsection__item--${l}`,style:u([y.itemStyle(l)]),onClick:t=>y.clickHandler(l),key:l},{default:n((()=>[r(g,{class:"u-subsection__item__text",style:u([y.textStyle(l)])},{default:n((()=>[b(d(y.getText(e)),1)])),_:2},1032,["style"])])),_:2},1032,["class","style","onClick"])))),128))])),_:1},8,["class","style"])}],["__scopeId","data-v-8b4f7511"]]);export{_};
